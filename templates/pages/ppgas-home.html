{% extends "base.html" %}

{% block title %}PPGAS - ethnos_app{% endblock %}

{% block content %}
<div class="page-header" aria-labelledby="page-title">
  <h1 class="page-title" id="page-title">PPGAS</h1>
</div>

<section aria-labelledby="professors-by-disciplines-section">
  <h3 class="title-section" id="professors-by-disciplines-section">Disciplinas por Professores</h3>
  {% if disciplinas_por_professores %}
  <table class="data-table ppgas-disciplinas-por-professores-table" aria-describedby="professors-by-disciplines-section">
    <thead>
      <tr>
        <th scope="col">PROFESSOR</th>
        <th scope="col">DISCIPLINAS</th>
        <th scope="col">PER√çODO</th>
      </tr>
    </thead>
    <tbody>
      {% for item in disciplinas_por_professores %}
      <tr>
        <td class="field-value"><a class="action-link" href="{{ url_for('instructors_detail', instructor_id=item.professor_id) }}" aria-label="Ver detalhes de {{ item.professor }}">{{ item.professor }}</a></td>
        <td class="field-value">{{ item.total_disciplinas }}</td>
        <td class="field-value">{{ item.periodo or 'N/A' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="action-links">
    <a href="{{ url_for('instructors_list') }}" class="action-btn btn-positive">Ver Todos os Professores</a>
  </div>
  {% else %}
  <p class="field-value">Nenhuma disciplina por professor encontrada.</p>
  {% endif %}
</section>

<section aria-labelledby="courses-section">
  <h3 class="title-section" id="courses-section">Disciplinas por Bibliografia</h3>
  {% if courses %}
  <table class="data-table ppgas-courses-table" aria-describedby="courses-section">
    <thead>
      <tr>
        <th scope="col">DISCIPLINA</th>
        <th scope="col">ANO</th>
        <th scope="col">PROFESSOR</th>
        <th scope="col">OBRAS</th>
      </tr>
    </thead>
    <tbody>
      {% for course in courses %}
      <tr>
        <td class="field-value"><a class="action-link" href="{{ url_for('courses_ppgas_detail', course_id=course.id) }}" aria-label="Ver detalhes de {{ course.name }}">{{ course.name | truncate(60) }}</a></td>
        <td class="field-value">{{ course.year or 'N/A' }}</td>
        <td class="field-value">{{ course.instructors or 'N/A' }}</td>
        <td class="field-value">{{ course.bibliography_count or 0 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <div class="action-links">
    <a href="{{ url_for('courses_ppgas') }}" class="action-btn btn-positive">Ver Todas as Disciplinas</a>
  </div>
{% else %}
  <p class="field-value">Nenhuma disciplina encontrada.</p>
{% endif %}
</section>
{% endblock %}
